# 01-intro.md 修正計画

このドキュメントは、`src/01-intro.md`（入門編）に対する修正計画をまとめたものです。

## 概要

- **対象者**: Java/Spring Boot経験者 → **Python開発者**に変更
- 全体的に Java/Spring Boot の例を Python に置き換え
- 研究データの正確性を向上
- 新しいトピックの追加とクイズの削除

---

## 活用する knowledges ドキュメント

修正時に参照・引用すべきknowledgesファイル：

### 5つの特性関連

| ファイル | 活用内容 |
|---------|---------|
| `14-jagged-intelligence.md` | Jagged Intelligence の詳細説明、Harvard研究データ、対策 |
| `13-reward-hacking-ai.md` | Test Hacking（手抜き）の詳細、対策方法、コード例 |
| `16-ai-scope-creep.md` | Scope Creep（暴走）の詳細、具体例、ガードレール設定方法 |
| `17-context-limitations.md` | 忘れっぽさの詳細、トークン制限、**Claude Skills** による対策 |
| `15-ai-hallucination.md` | Hallucination（虚偽報告）の詳細と対策 |

### Trust but Verify 関連

| ファイル | 活用内容 |
|---------|---------|
| `18-trust-but-verify.md` | **レーガン大統領の逸話**、3段階レビュー、多層防御、具体的な検証方法 |

### 研究データ関連

| ファイル | 活用内容 |
|---------|---------|
| `31-ai-coding-productivity-research.md` | GitHub Copilot研究（Microsoft Research）、生産性向上データ |
| `34-ai-driven-development-problems.md` | CrowdStrike事件、Google DORA Report、GitClear研究、シニアエンジニアのバーンアウト |
| `33-ai-context-documentation-importance.md` | **Context is the New Code** 研究データ、Microsoft/Stanford研究 |

### Claude Code 機能関連

| ファイル | 活用内容 |
|---------|---------|
| `20-claude-code-modes.md` | 4つのモードの詳細 |
| `21-claude-code-custom-commands.md` | カスタムコマンドの詳細（TDDコマンド例） |

### 引用すべき主要データ

**Harvard研究（14-jagged-intelligence.md より）**:
- 758人のコンサルタント（Boston Consulting Groupと共同）
- フロンティア内タスク：12%多く完了、25%高速、40%高品質
- フロンティア外タスク：正解率19%低下

**Trust but Verify（18-trust-but-verify.md より）**:
- レーガン大統領の「Doveryay, no proveryay」（信頼せよ、されど検証せよ）
- 3層の検証：自動検証、AI自己検証、人間レビュー

**Context is the New Code（33-ai-context-documentation-importance.md より）**:
- Microsoft研究：明示的仕様で改良68%削減
- Stanford研究：標準化で満足度89% vs 非標準化34%（2.6倍）
- Cursor研究：機能実装速度57%高速化、デバッグ時間42%短縮

**AI駆動開発の問題点（34-ai-driven-development-problems.md より）**:
- Google DORA Report：コードレビュー時間91%増加、PRサイズ154%増加、バグ率9%増加
- GitClear：コード重複8倍増加
- シニアエンジニアのバーンアウト65%
- CrowdStrike：エラー率42.1%（手動22.8%の約2倍）

---

## 修正項目一覧

### 1. Harvard研究の記述修正

**現状**:
> Harvard研究（758人）：品質40%↑、速度25%↑

**問題点**: この研究はコンサルタントの生産性に関するもので、AI駆動開発そのものの研究ではない。

**修正後**:
> Harvard研究（758人のコンサルタント）：品質40%↑、速度25%↑
> - コンサルティング業務における生産性調査
> - AI駆動開発に限定された研究ではないことに留意

---

### 2. CrowdStrike事件の独立スライド追加

**現状**: CrowdStrike研究としてエラー率のみ言及

**修正後**: Windowsブルースクリーン障害についての独立スライドを追加

```markdown
---

### CrowdStrike事件 - AIの過信が招いた大規模障害

**2024年7月19日の事件**
- 全世界で約850万台のWindowsデバイスがブルースクリーン
- 航空会社、銀行、病院など社会インフラに深刻な影響
- 原因：ソフトウェアアップデートの検証不足

**AI時代の教訓**
- 自動化されたプロセスでも人間の検証が必要
- "Trust but Verify"（信頼しつつ検証する）の重要性
- テスト環境と本番環境の差異に注意

**被害規模**
- 推定損害額：数十億ドル規模
- 復旧に数日〜数週間を要したケースも
```

---

### 3. GitHub Copilot研究の引用元明記

**現状**:
> GitHub Copilot：タスク完了26%増加、コンパイル38%増加

**修正後**:
> GitHub Copilot（Microsoft Research/GitHub調査）：タスク完了26%増加、コンパイル38%増加

---

### 4. AI駆動開発の問題点の詳細化

**現状**: 失敗例の箇条書きのみ

**修正後**: 問題点を具体的に説明するスライドを追加

```markdown
---

### AI駆動開発の落とし穴

**間違った使い方が招く問題**

1. **コードの肥大化**
   - GitClear研究：コード重複が8倍増加
   - 安易なコピー&ペースト的な生成

2. **レビュー負担の増大**
   - Google DORA：コードレビュー時間91%増加
   - PRサイズ154%増加、バグ9%増加

3. **開発者の疲弊**
   - シニアエンジニア：バーンアウト65%
   - AIの出力を検証する負担

4. **品質低下**
   - CrowdStrike研究：エラー率2倍（42.1% vs 22.8%）
   - テストを通すだけの表面的な実装
```

---

### 5. 5つの特性と対策の詳細化

**現状**: 対策が単純すぎる

**修正後**: 仕様書、受入基準、テストとの関連を明確化。特に「忘れっぽさ」への対策として、ドキュメント化とClaude Skills機能の活用を強調。

```markdown
---

### AIの5つの特性と本質的な対策

**1. 暴走（Scope Creep）**
- 問題：Issue範囲外の機能を勝手に追加
- 本質的対策：
  - 仕様書で機能範囲を明確化
  - 受入基準で「完了」を定義
  - テストで範囲外の実装を検出

**2. 手抜き（Test Hacking）**
- 問題：テストを通すだけの仮実装
- 本質的対策：
  - 受入基準を具体的かつ厳密に記述
  - テストケースを事前に明記
  - AI自己検証を習慣化

**3. 忘れっぽさ（Context Loss）**
- 問題：過去の指示を忘れる、コンテキスト汚染
- 本質的対策：
  - **CLAUDE.mdに永続的なルールを記載**
  - **Claude Skillsで再利用可能な知識を定義**（後述）
  - 仕様書・設計書で決定事項を文書化
  - /clearで定期的にリセット

**4. 凸凹知能（Jagged Intelligence）**
- 問題：得意分野と苦手分野の差が激しい
- 本質的対策：
  - 人間がAIの能力限界を理解する
  - 適切な期待値を持つ
  - 苦手分野は人間が設計・レビュー

**5. 虚偽報告（Hallucination）**
- 問題：自信満々に誤った情報を提供
- 本質的対策：
  - 自動テストで検証（pytest, mypy）
  - 公式ドキュメントで確認
  - AI自己検証スコアを確認
```

---

### 6. Jagged Intelligence の説明強化

**現状**: 「人間が設計、AIが実装・リファクタリング」のみ

**修正後**: 人間の期待値管理を強調

```markdown
---

### Jagged Intelligence - AIの凸凹な能力

**AIは万能ではない**
- 定型的なコード生成：非常に得意
- 複雑なビジネスロジック：苦手
- 最新のAPI・ライブラリ：知識が古い可能性

**人間に求められること**
1. **適切な期待値を持つ**
   - AIは優秀なジュニアエンジニアと考える
   - 得意・不得意を理解して使い分ける

2. **苦手分野を補完する**
   - 設計は人間が主導
   - レビューで品質を担保

3. **AIの限界を認識する**
   - 「できる」と言っても実際にできるとは限らない
   - 結果を必ず検証する
```

---

### 7. クイズの削除

**削除対象**:
- 「【マッチングクイズ】AI 5特性と対策（2分）」スライド
- 「【〇×クイズ】3つの原則の理解確認（1分）」スライド

---

### 8. Reagan「Trust but Verify」の逸話追加

**追加位置**: 「原則1: Trust but Verify」の直後

```markdown
---

### Trust but Verify の起源

**レーガン大統領と核軍縮交渉**
- 1987年、米ソ間の中距離核戦力全廃条約（INF条約）
- レーガン大統領がロシアのことわざを引用
- 「Doveryay, no proveryay」（信頼せよ、されど検証せよ）

**AI開発への適用**
- AIは優秀なパートナーだが、盲目的な信頼は危険
- 出力は必ず検証する
- 検証プロセスを仕組み化する（自動テスト、レビュー）

**「信頼」と「検証」のバランス**
- 過度な不信：AIの恩恵を受けられない
- 過度な信頼：品質低下、障害のリスク
- 適切なバランス：効率と品質の両立
```

---

### 9. 「Context is the New Code」研究の詳細スライド追加

**現状**: Microsoft研究、Stanford研究を簡潔に言及

**修正後**: 詳細なスライドを追加

```markdown
---

### Context is the New Code - 研究データ

**Microsoft Research 2023**
- 対象：500人以上の開発者
- 発見：明示的な仕様があると改良（修正要求）が68%削減
- 理由：初回で正しいコードが生成される

**Stanford HAI 2024**
- 対象：企業の開発チーム
- 発見：標準化されたコンテキストで満足度89%
- 比較：非標準化では満足度34%（2.6倍の差）

**実務での効果**
- 設計に2時間投資 → 実装10時間→3時間に短縮
- ROI：3.5倍以上の効率化
- 品質も向上（手戻り削減）

**結論**: コンテキストへの投資は最も効果的な戦略
```

---

### 10. 「小さく分けて進める」→「段階的に進める」に変更

**現状**: 10分ルールのみ

**修正後**: 具体例を追加

```markdown
---

### 原則3: 段階的に進める

**なぜ段階的に進めるのか**
- AIの集中力には限界がある
- 長いタスクは暴走・手抜き・忘れるリスク増大
- 小さなステップで品質を維持

**具体例：ユーザー認証機能**

❌ 悪い例（大きすぎる）:
「ユーザー認証機能を実装して」

✅ 良い例（段階的）:
1. Userモデルを作成（10分）
2. パスワードハッシュ化を実装（10分）
3. ログインエンドポイントを作成（10分）
4. JWTトークン発行を実装（10分）
5. 認証ミドルウェアを作成（10分）

**効果**
- 各ステップで品質確認可能
- 問題の早期発見
- 進捗が明確
```

---

### 11. Claude Skills の説明追加

**追加位置**: Claude Codeの基本の後

```markdown
---

### Claude Skills とは

**Skills の概念**
- AIの能力を拡張するための設定ファイル
- `.claude/skills/` ディレクトリに配置
- 特定のタスクに特化した指示を定義

**Skills の種類**
1. **コード生成スキル**: 言語やフレームワーク固有のルール
2. **品質管理スキル**: テスト、レビューの自動化
3. **ドキュメントスキル**: 仕様書、README生成

**例: Pythonプロジェクト用スキル**
```markdown
# Python開発スキル
- ruff でフォーマット・リント
- pytest でテスト
- mypy で型チェック
- pyright で静的解析
```

**効果**
- プロジェクトに最適化されたAI動作
- 一貫した品質の維持
```

---

### 12. コンテキストとトークンの説明改善

**現状**: トークンの説明が簡潔すぎる

**修正後**: より詳細な説明

```markdown
---

### コンテキストとトークンの理解

**トークンとは**
- AIがテキストを処理する単位
- 日本語：約1.5-2文字で1トークン
- 英語：約4文字で1トークン
- Claude Codeの上限：200,000トークン

**コンテキストの使われ方**
```
200K トークンの内訳（設計書なし）
├── システムプロンプト: 10K
├── 読み込んだコード: 150K
├── 会話履歴: 20K
└── 思考・生成: 20K  ← これでは複雑なロジックは無理

200K トークンの内訳（設計書あり）
├── システムプロンプト: 10K
├── 設計書: 30K
├── 必要なコードのみ: 50K
├── 会話履歴: 20K
└── 思考・生成: 90K  ← 4.5倍の思考容量！
```

**なぜ設計書が重要か**
- コード全体を読む必要がなくなる
- AIの思考容量が大幅に増加
- 複雑なロジックにも対応可能
```

---

### 13. カスタムコマンドの例を変更

**現状**: `/plan`, `/implement`, `/verify`, `/refactor`, `/review`

**修正後**: TDDサイクルに基づくコマンド

```markdown
---

### カスタムコマンドの活用

**TDDサイクル用コマンド**
- `/tdd-plan`：実装計画を立てる
- `/tdd-red`：失敗するテストを書く
- `/tdd-green`：テストを通す最小実装
- `/tdd-refactor`：コードを改善
- `/tdd-verify`：完成度を検証

**使用例**
```bash
# 1. 計画を立てる
/tdd-plan ユーザー認証機能

# 2. テストファースト
/tdd-red ログイン機能のテストを書いて

# 3. 実装
/tdd-green テストを通して

# 4. リファクタリング
/tdd-refactor コードを改善して

# 5. 検証
/tdd-verify 完成度を確認して
```
```

---

### 14. CLAUDE.md のディレクトリ別配置の説明追加

**追加位置**: CLAUDE.mdの説明の後

```markdown
---

### CLAUDE.md のディレクトリ別配置

**モノレポでの活用**
```
project/
├── CLAUDE.md              ← プロジェクト全体のルール
├── frontend/
│   └── CLAUDE.md          ← フロントエンド固有のルール
├── backend/
│   └── CLAUDE.md          ← バックエンド固有のルール
└── tests/
    └── CLAUDE.md          ← テスト固有のルール
```

**ディレクトリ別ルールの例**

frontend/CLAUDE.md:
```markdown
# フロントエンドルール
- React + TypeScript
- biomeでフォーマット・リント
- Jestでテスト
```

backend/CLAUDE.md:
```markdown
# バックエンドルール
- Python 3.12
- FastAPI
- pytest + mypy
```

**効果**: 各ディレクトリで最適なルールが自動適用
```

---

### 15. 「AIに質問させる」→「AIにあいまいな点を明確化させる」に変更

**現状**: 質問させる手法の簡単な説明

**修正後**: 技術スタック、ライブラリの例を含む詳細説明

```markdown
---

### AIにあいまいな点を明確化させる

**問題：AIは推測で進める**
- 技術スタック未定義 → 勝手にライブラリを選択
- テスト方法不明 → ハードコードで済ませる
- 設計方針なし → 独自の判断で実装

**CLAUDE.mdに記載する指示**
```markdown
実装前に、以下について不明・あいまいな点があれば必ず質問してください：
- 使用する技術スタック・ライブラリ
- テスト方法とカバレッジ目標
- エラーハンドリングの方針
- ログ出力の要否とレベル
```

**AIからの質問例**
- 「Webフレームワークは何を使いますか？（FastAPI / Django / Flask）」
- 「データベースはどれを使いますか？（PostgreSQL / SQLite / MySQL）」
- 「認証ライブラリは指定がありますか？（PyJWT / python-jose など）」
- 「テストカバレッジ目標は何%ですか？」

**効果**
- 技術選定のミスマッチ防止
- 一貫性のあるコードベース
- 手戻りの削減
```

---

### 16. プロジェクト初期化：モダンな開発環境

**現状**: Node.js, Java/Maven の説明

**修正後**: mise, ruff, pyright, biome を活用

```markdown
---

### モダンな開発環境の準備

**推奨ツールスタック**
- **mise**: 複数言語のバージョン管理
- **ruff**: Python のリンター・フォーマッター（超高速）
- **pyright**: Python の型チェッカー
- **biome**: JavaScript/TypeScript のリンター・フォーマッター

**mise のセットアップ**
```bash
# mise インストール
curl https://mise.run | sh

# Python インストール
mise use python@3.12

# Node.js インストール（必要な場合）
mise use node@20
```

**Python プロジェクトの初期化**
```bash
# プロジェクト作成
mkdir my-project && cd my-project
python -m venv .venv
source .venv/bin/activate

# 開発ツール
pip install ruff pyright pytest

# 設定ファイル
touch pyproject.toml ruff.toml
```
```

---

### 17. Spring Bootプロジェクト → Pythonプロジェクトに変更

**現状**: Spring Initializr を使った Java プロジェクト

**修正後**: Python/FastAPI プロジェクト

```markdown
---

### Pythonプロジェクトの作成

**ステップ1: プロジェクト作成（5分）**
```bash
mkdir todo-app && cd todo-app
python -m venv .venv
source .venv/bin/activate
pip install fastapi uvicorn sqlalchemy pytest ruff pyright
```

**ステップ2: git初期化（3分）**
```bash
git init
echo ".venv/" >> .gitignore
echo "__pycache__/" >> .gitignore
echo ".pytest_cache/" >> .gitignore
git add .
git commit -m "chore: initial commit"
```

**重要**: `.gitignore`に仮想環境、キャッシュを追加

---

### CLAUDE.md作成（Python版）

**ステップ3: CLAUDE.md作成（7分）**

```markdown
# TODO管理アプリ

## プロジェクト概要
FastAPIによるTODO管理Web API

## 技術スタック
- Python 3.12
- FastAPI
- SQLAlchemy
- SQLite（開発用）
- pytest

## ディレクトリ構造
- app/
  - main.py - エントリーポイント
  - models.py - SQLAlchemyモデル
  - schemas.py - Pydanticスキーマ
  - crud.py - データアクセス
  - routers/ - APIルーター

## コーディング規約
- ruff でフォーマット・リント
- pyright で型チェック
- テストカバレッジ80%以上必須
- 実装前に不明点があれば必ず質問すること
```
```

---

### 18. 検証コマンドの変更

**現状**: `mvn verify`, `mvn test`, `mvn clean install`

**修正後**: Python ツールに変更

```markdown
**3段階検証**
1. 自動検証: `pytest && ruff check && pyright`
2. AI自己検証:「100点満点で評価して」
3. 人間レビュー: git diff確認
```

---

### 19. 5-STEP ワークフローは維持

既存の5-STEPワークフローの説明は維持し、例示のみPythonに変更。

---

## スライド構成（修正後）

1. タイトルスライド
2. なぜAI駆動開発なのか（セクション）
3. 衝撃的な効果 - でも落とし穴もある（修正）
4. **CrowdStrike事件 - AIの過信が招いた大規模障害（新規）**
5. **AI駆動開発の落とし穴（新規）**
6. AIの5つの特性を理解する（セクション）
7. AIが持つ5つの特性（修正：対策の詳細化）
8. **AIの5つの特性と本質的な対策（新規）**
9. AIの特性への対策まとめ（修正）
10. ~~【マッチングクイズ】AI 5特性と対策~~（削除）
11. AIとの付き合い方：3つの原則（セクション）
12. 原則1: Trust but Verify（維持）
13. **Trust but Verifyの起源 - レーガン大統領（新規）**
14. 原則2: Context is the New Code（維持）
15. **Context is the New Code - 研究データ（新規）**
16. 原則3: 段階的に進める（修正）
17. ~~【〇×クイズ】3つの原則の理解確認~~（削除）
18. Claude Codeとは（セクション）
19. Claude Codeの基本（維持）
20. **Claude Skills とは（新規）**
21. コンテキストとトークンの理解（修正）
22. Claude Codeの4つのモード（維持）
23. カスタムコマンドとPlanモード（修正：TDDコマンド）
24. CLAUDE.mdとREADME.md（維持）
25. **CLAUDE.mdのディレクトリ別配置（新規）**
26. AIにあいまいな点を明確化させる（修正）
27. プロジェクトの初期化（セクション）
28. **モダンな開発環境の準備（修正：mise, ruff, pyright）**
29. Pythonプロジェクトの作成（修正：Spring Boot → Python）
30. CLAUDE.md作成（修正：Python版）
31. README.md作成（修正：Python版）
32. カスタムコマンドの準備（修正：TDDコマンド）
33. 成果物の確認（修正：pytest）
34. Claude Codeの使い方のコツ（維持）
35. 5-STEPワークフロー（セクション）
36. 5-STEPの全体像と効果（維持）
37. 5-STEPと人間・AIの役割分担（維持）
38. 今日の学習内容（セクション）
39. 3つのセッション（維持）
40. AI駆動開発で大切なこと（修正：Python例）
41. 質問タイム（維持）

---

## 修正の優先順位

### 高優先度（必須）
1. Java → Python への全面変更
2. クイズの削除
3. CrowdStrike事件の独立スライド追加
4. Reagan「Trust but Verify」の逸話追加
5. 5つの特性の対策詳細化

### 中優先度（重要）
6. カスタムコマンドをTDDコマンドに変更
7. Claude Skills の説明追加
8. CLAUDE.mdのディレクトリ別配置の説明
9. 「AIにあいまいな点を明確化させる」への変更
10. モダン開発環境（mise, ruff, pyright）の説明

### 低優先度（推奨）
11. 研究データの引用元明記
12. Context is the New Code の詳細スライド
13. コンテキストとトークンの説明改善
14. 「段階的に進める」の具体例追加

---

## 作業見積もり

修正作業は以下の順序で実施：

1. 全体的なJava→Python置き換え
2. クイズ削除
3. 新規スライド追加（6スライド程度）
4. 既存スライドの修正
5. 品質チェック（オーバーフロー確認）

---

## Marpオーバーフロー対策

### 注意事項

各スライドがMarpで正しく表示されるよう、以下の点に注意する：

1. **1スライドあたりの項目数**: 5〜13項目を目安
2. **階層の深さ**: 最大3階層まで
3. **1項目あたりの文字数**: 30文字以内を推奨（最大50文字）
4. **コードブロック**: 長すぎる場合は複数スライドに分割

### 分量が多くなりそうなスライドの対処

| スライド | 対処方針 |
|---------|---------|
| 5つの特性と本質的な対策 | 2スライドに分割（1-3, 4-5） |
| コンテキストとトークンの理解 | 図を簡潔に、説明を別スライドへ |
| CLAUDE.mdのディレクトリ別配置 | コード例を最小限に |
| カスタムコマンドの活用 | 使用例を別スライドへ分離 |

### 修正後の品質チェック

```bash
# CSS追加（初回）
python scripts/fix-slides.py add-css src/01-intro.md

# オーバーフローチェック
bun scripts/check-slides.js overflow src/01-intro.md

# 問題があれば自動修正
python scripts/fix-slides.py auto-font src/01-intro.md

# 再チェック
bun scripts/check-slides.js overflow src/01-intro.md
```

### フォントサイズクラスの活用

オーバーフローが発生した場合の対応：

| オーバーフロー量 | 適用クラス | 使用例 |
|----------------|----------|--------|
| 50px未満 | `font-small` | 軽度のはみ出し |
| 50-150px | `font-xsmall` | 中程度のはみ出し |
| 150px以上 | `font-xxsmall` | 重度のはみ出し（コンテンツ削減も検討） |

```markdown
---

<!-- _class: font-small -->

### 情報量の多いスライド

- 項目1
- 項目2
...
```

### コンテンツ削減の方針

`font-xxsmall`でも解決しない場合：

1. **スライド分割**: 1スライドを2スライドに
2. **詳細は別資料へ**: 「詳細は付録参照」として分離
3. **2カラムレイアウト**: `<div class="columns">` を活用
4. **箇条書きの簡略化**: 長い説明文を短いキーワードに
